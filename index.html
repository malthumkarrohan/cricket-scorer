<!DOCTYPE html>
<html>
<head>
  <title>🏏 Cricket Scorer</title>
  <style>
    body { font-family: sans-serif; text-align: center; padding: 30px; }
    button { margin: 10px; padding: 15px 25px; font-size: 18px; }
    h1, h2 { margin-bottom: 0.2em; }
  </style>
</head>
<body>
  <h1>🏏 Cricket Scorer</h1>
  <h2 id="score">Score: 0</h2>
  <h2 id="wickets">Wickets: 0/10</h2>
  <h2 id="overs">Overs: 0.0</h2>

  <div>
    <button onclick="addRun(1)">1 Run</button>
    <button onclick="addRun(2)">2 Runs</button>
    <button onclick="addRun(3)">3 Runs</button>
    <button onclick="addRun(4)">4 Runs</button>
    <button onclick="addRun(6)">6 Runs</button>
  </div>

  <div>
    <button onclick="addExtra('noBall')">No Ball</button>
    <button onclick="addExtra('wide')">Wide</button>
    <button onclick="addWicket()">Wicket</button>
    <button onclick="reset()">Reset</button>
  </div>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/12.0.0/firebase-app.js";
    import { getDatabase, ref, set, onValue } from "https://www.gstatic.com/firebasejs/12.0.0/firebase-database.js";

    const firebaseConfig = {
      apiKey: "AIzaSyBly7Pnw86MfsHWN4zgYVUzjvVC-TfJSZI",
      authDomain: "cricket-scorer-4fc6e.firebaseapp.com",
      databaseURL: "https://cricket-scorer-4fc6e-default-rtdb.firebaseio.com",
      projectId: "cricket-scorer-4fc6e",
      storageBucket: "cricket-scorer-4fc6e.firebasestorage.app",
      messagingSenderId: "1086801100988",
      appId: "1:1086801100988:web:0d961fb9749e57d48e50b9"
    };

    const app = initializeApp(firebaseConfig);
    const db = getDatabase(app);
    const scoreRef = ref(db, "scoreData");

    let score = 0, wickets = 0, overs = 0, balls = 0;

    function updateDisplay() {
      document.getElementById("score").textContent = `Score: ${score}`;
      document.getElementById("wickets").textContent = `Wickets: ${wickets}/10`;
      document.getElementById("overs").textContent = `Overs: ${overs}.${balls}`;
    }

    function saveState() {
      set(scoreRef, {
        score,
        wickets,
        overs,
        balls
      });
    }

    function addRun(runs) {
      score += runs;
      addBall();
      saveState();
    }

    function addWicket() {
      if (wickets >= 10) return;
      wickets++;
      addBall();
      saveState();
    }

    function addExtra(type) {
      if (type === "noBall" || type === "wide") {
        score += 1; // Extra run
        // No ball does not count toward ball count
        saveState();
      }
    }

    function addBall() {
      balls++;
      if (balls === 6) {
        balls = 0;
        overs++;
      }
    }

    function reset() {
      score = 0;
      wickets = 0;
      overs = 0;
      balls = 0;
      saveState();
    }

    // Listen for Firebase data
    onValue(scoreRef, (snapshot) => {
      const data = snapshot.val();
      if (data) {
        score = data.score || 0;
        wickets = data.wickets || 0;
        overs = data.overs || 0;
        balls = data.balls || 0;
        updateDisplay();
      }
    });

    updateDisplay();
  </script>
</body>
</html>

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Cricket Scorer</title>
  <style>
    body {
      background-color: #0b0c10;
      color: #ffffff;
      font-family: 'Segoe UI', sans-serif;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 20px;
      animation: fadeIn 1s ease-in;
    }

    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    h1 {
      color: #00ffcc;
      font-size: 2em;
      margin-bottom: 10px;
    }

    .score, .overs {
      font-size: 28px;
      font-weight: bold;
      margin-bottom: 10px;
    }

    .score-controls, .ball-controls {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      margin-bottom: 15px;
    }

    .buttons, .undo, .reset, .manual, .extras {
      display: none;
    }

    .buttons.active, .undo.active, .reset.active, .manual.active, .extras.active {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 10px;
      margin-bottom: 10px;
    }

    .undo.active, .reset.active {
      display: inline-block;
    }

    button {
      background-color: #1f2833;
      color: white;
      padding: 10px 16px;
      font-size: 16px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    button:hover {
      transform: scale(1.05);
      background-color: #45a29e;
    }

    button.undo {
      background-color: #f44336;
      margin-top: 20px;
    }

    button.reset {
      background-color: #007bff;
      margin-top: 10px;
    }

    #login-section {
      margin-top: 20px;
    }

    input {
      padding: 10px;
      margin: 5px;
      font-size: 16px;
      border-radius: 4px;
      border: none;
    }

    .animation {
      position: fixed;
      top: 30%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 36px;
      opacity: 1;
      animation: popOut 1.2s ease forwards;
      z-index: 9999;
    }

    @keyframes popOut {
      0% { transform: translate(-50%, -50%) scale(1); opacity: 1; }
      100% { transform: translate(-50%, -100%) scale(2); opacity: 0; }
    }

    @media (max-width: 480px) {
      .buttons.active, .extras.active, .manual.active, .score-controls, .ball-controls {
        flex-direction: column;
        width: 100%;
      }

      button {
        width: 100%;
      }
    }
  </style>
</head>
<body>
  <h1>üèè Cricket Scorer</h1>
  <div class="score" id="score">Score: 0</div>
  <div class="overs" id="overs">Overs: 0.0</div>

  <div id="login-section">
    <input type="text" id="username" placeholder="Username" />
    <input type="password" id="password" placeholder="Password" />
    <button onclick="login()">Login</button>
  </div>

  <div class="buttons" id="run-buttons">
    <button onclick="addRun(0)">Dot Ball (0)</button>
    <button onclick="addRun(1)">1 Run</button>
    <button onclick="addRun(2)">2 Runs</button>
    <button onclick="addRun(3)">3 Runs</button>
    <button onclick="addRun(4)">4 Runs</button>
    <button onclick="addRun(6)">6 Runs</button>
  </div>

  <div class="extras" id="extra-buttons">
    <button onclick="addExtra('wide')">Wide +1</button>
    <button onclick="addExtra('noball')">No Ball +1</button>
  </div>

  <div class="score-controls" id="score-controls">
    <label>Score</label>
    <button onclick="manualAdjust('score', -1)">‚àí</button>
    <button onclick="manualAdjust('score', 1)">+</button>
  </div>

  <div class="ball-controls" id="ball-controls">
    <label>Balls</label>
    <button onclick="manualAdjust('ball', -1)">‚àí</button>
    <button onclick="manualAdjust('ball', 1)">+</button>
  </div>

  <button class="undo" id="undo-btn" onclick="undoRun()">Undo / Back</button>
  <button class="reset" id="reset-btn" onclick="confirmResetMatch()">Next Match</button>

  <script>
    let score = 0;
    let balls = 0;
    let overs = 0;
    const history = [];

    function updateDisplay() {
      document.getElementById('score').textContent = `Score: ${score}`;
      document.getElementById('overs').textContent = `Overs: ${overs}.${balls}`;
    }

    function animateRun(run, type = "run") {
      const msg = type === "wide" ? "‚ûï Wide!" :
                  type === "noball" ? "‚ûï No Ball!" :
                  run === 4 ? "ü¶Ü Zoom to the rope!" :
                  run === 6 ? "ü¶Ü Full toss SMASH!" :
                  run === 0 ? "Dot ball" :
                  `${run} run${run > 1 ? 's' : ''}!`;

      const anim = document.createElement("div");
      anim.className = "animation";
      anim.textContent = msg;
      document.body.appendChild(anim);

      setTimeout(() => document.body.removeChild(anim), 1200);
    }

    function addRun(run) {
      score += run;
      history.push({ scoreChange: run, ballChange: 1 });
      animateRun(run);
      addBall();
      updateDisplay();
    }

    function addExtra(type) {
      score += 1;
      history.push({ scoreChange: 1, ballChange: 0 });
      animateRun(1, type);
      updateDisplay();
    }

    function addBall() {
      balls += 1;
      if (balls === 6) {
        balls = 0;
        overs += 1;
      }
    }

    function manualAdjust(field, amount) {
      if (field === 'score') {
        score = Math.max(0, score + amount);
        history.push({ scoreChange: amount, ballChange: 0 });
      } else if (field === 'ball') {
        balls += amount;
        if (balls < 0) {
          if (overs > 0) {
            overs--;
            balls = 5;
          } else {
            balls = 0;
          }
        } else if (balls > 5) {
          overs++;
          balls = 0;
        }
        history.push({ scoreChange: 0, ballChange: amount });
      }
      updateDisplay();
    }

    function undoRun() {
      const last = history.pop();
      if (!last) return;
      score = Math.max(0, score - last.scoreChange);

      if (last.ballChange) {
        if (balls === 0 && overs > 0) {
          overs--;
          balls = 5;
        } else {
          balls = Math.max(0, balls - 1);
        }
      }

      updateDisplay();
    }

    function confirmResetMatch() {
      const confirmed = confirm("Are you sure you want to start a new match?");
      if (confirmed) {
        score = 0;
        balls = 0;
        overs = 0;
        history.length = 0;
        updateDisplay();
      }
    }

    function login() {
      const user = document.getElementById('username').value;
      const pass = document.getElementById('password').value;

      if (user === 'User' && pass === 'password') {
        document.getElementById('login-section').style.display = 'none';
        document.getElementById('run-buttons').classList.add('active');
        document.getElementById('extra-buttons').classList.add('active');
        document.getElementById('score-controls').classList.add('active');
        document.getElementById('ball-controls').classList.add('active');
        document.getElementById('undo-btn').classList.add('active');
        document.getElementById('reset-btn').classList.add('active');
      } else {
        alert('Invalid credentials. Use Username: User and Password: password');
      }
    }

    updateDisplay();
  </script>
</body>
</html>
